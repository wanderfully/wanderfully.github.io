<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>&lt;div&gt;wander &lt;div&gt;写鬼写妖高人一筹&lt;/div&gt;&lt;div&gt;刺贪刺虐入目三分&lt;/div&gt;&lt;/div&gt;</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="wanderfully.club/"/>
  <updated>2019-05-28T02:07:30.779Z</updated>
  <id>wanderfully.club/</id>
  
  <author>
    <name>wander</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>常用正则</title>
    <link href="wanderfully.club/2019/05/28/%E5%B8%B8%E7%94%A8%E6%AD%A3%E5%88%99/"/>
    <id>wanderfully.club/2019/05/28/常用正则/</id>
    <published>2019-05-28T02:04:55.000Z</published>
    <updated>2019-05-28T02:07:30.779Z</updated>
    
    <content type="html"><![CDATA[<!-- 已经写好的文章在对应的md文件头部添加top：{number}即可 数值越大优先级越高 --><h3 id="邮箱"><a href="#邮箱" class="headerlink" title="邮箱"></a>邮箱</h3><blockquote><p>/^(\w)+@(\w)+(.[A-Za-z]{2,3}){1,3}$/</p></blockquote><h3 id="中文"><a href="#中文" class="headerlink" title="中文"></a>中文</h3><blockquote><p>/^[\u4E00-\u9FA5]{0,}$/</p></blockquote><p>### </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- 已经写好的文章在对应的md文件头部添加top：{number}即可 数值越大优先级越高 --&gt;
&lt;h3 id=&quot;邮箱&quot;&gt;&lt;a href=&quot;#邮箱&quot; class=&quot;headerlink&quot; title=&quot;邮箱&quot;&gt;&lt;/a&gt;邮箱&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;/^(\
      
    
    </summary>
    
      <category term="正则" scheme="wanderfully.club/categories/%E6%AD%A3%E5%88%99/"/>
    
    
      <category term="正则" scheme="wanderfully.club/tags/%E6%AD%A3%E5%88%99/"/>
    
  </entry>
  
  <entry>
    <title>js常用API</title>
    <link href="wanderfully.club/2019/05/27/js%E5%B8%B8%E7%94%A8API/"/>
    <id>wanderfully.club/2019/05/27/js常用API/</id>
    <published>2019-05-27T10:50:49.000Z</published>
    <updated>2019-05-28T02:09:46.018Z</updated>
    
    <content type="html"><![CDATA[<!-- 已经写好的文章在对应的md文件头部添加top：{number}即可 数值越大优先级越高 --><h3 id="cookie的获取、设置、删除"><a href="#cookie的获取、设置、删除" class="headerlink" title="cookie的获取、设置、删除"></a>cookie的获取、设置、删除</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">cookies: &#123;</span><br><span class="line">  <span class="comment">//获取</span></span><br><span class="line">  <span class="keyword">get</span>(name) &#123;</span><br><span class="line">    <span class="keyword">let</span> arr, reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"(^| )"</span> + name + <span class="string">"=([^;]*)(;|$)"</span>);</span><br><span class="line">    <span class="keyword">if</span> (arr = <span class="built_in">document</span>.cookie.match(reg))</span><br><span class="line">      <span class="keyword">return</span> (arr[<span class="number">2</span>]);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 设置cookie</span></span><br><span class="line"><span class="comment">   * @param c_name 名称</span></span><br><span class="line"><span class="comment">   * @param value  值</span></span><br><span class="line"><span class="comment">   * @param time   时间，s30=30秒，h12=12小时，d7=7天</span></span><br><span class="line"><span class="comment">   * @param path   路径，默认 根 /</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">set</span>(c_name, value, time, path = '/') &#123;</span><br><span class="line">    <span class="keyword">let</span> exp = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    <span class="keyword">let</span> strSec = getSec(time);</span><br><span class="line">    exp.setTime(exp.getTime() + strSec * <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">document</span>.cookie = c_name + <span class="string">"="</span> + <span class="built_in">escape</span>(value) + (!time ? <span class="string">""</span> : <span class="string">";expires="</span> + exp.toGMTString()) + <span class="string">';path='</span> + path;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getSec</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">let</span> str1 = str.substring(<span class="number">1</span>, str.length) * <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">let</span> str2 = str.substring(<span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">      <span class="keyword">if</span> (str2 === <span class="string">"s"</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> str1 * <span class="number">1000</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (str2 === <span class="string">"h"</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> str1 * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (str2 === <span class="string">"d"</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> str1 * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//删除</span></span><br><span class="line">  del(name) &#123;</span><br><span class="line">    <span class="keyword">let</span> exp = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    exp.setTime(exp.getTime() - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">let</span> cval = <span class="keyword">this</span>.get(name);</span><br><span class="line">    <span class="keyword">if</span> (cval != <span class="literal">null</span>)</span><br><span class="line">      <span class="built_in">document</span>.cookie = name + <span class="string">"="</span> + cval + <span class="string">";expires="</span> + exp.toGMTString();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h3 id="清除空格"><a href="#清除空格" class="headerlink" title="清除空格"></a>清除空格</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">clearBank(txt) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span>  txt === <span class="string">'string'</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> txt.replace(<span class="regexp">/\s/g</span>, <span class="string">''</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'请输入正确的类型'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h3 id="解码html"><a href="#解码html" class="headerlink" title="解码html"></a>解码html</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">htmlDecode(html) &#123;</span><br><span class="line">    <span class="keyword">return</span> html.replace(<span class="regexp">/(\&amp;|\&amp;)gt;/g</span>, <span class="string">"&gt;"</span>)</span><br><span class="line">        .replace(<span class="regexp">/(\&amp;|\&amp;)lt;/g</span>, <span class="string">"&lt;"</span>)</span><br><span class="line">        .replace(<span class="regexp">/(\&amp;|\&amp;)quot;/g</span>, <span class="string">"\""</span>);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h3 id="转译特殊字符"><a href="#转译特殊字符" class="headerlink" title="转译特殊字符"></a>转译特殊字符</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">escape</span>(str) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.isEmpty(str)) &#123;</span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">  &#125;</span><br><span class="line">  str = str.replace(<span class="regexp">/&amp;lt;/g</span>, <span class="string">"&lt;"</span>);</span><br><span class="line">  str = str.replace(<span class="regexp">/&amp;gt;/g</span>, <span class="string">"&gt;"</span>);</span><br><span class="line">  str = str.replace(<span class="regexp">/&amp;acute;/g</span>, <span class="string">"'"</span>);</span><br><span class="line">  str = str.replace(<span class="regexp">/&amp;#45;&amp;#45;/g</span>, <span class="string">"--"</span>);</span><br><span class="line">  str = str.replace(<span class="regexp">/&amp;lt;/g</span>, <span class="string">"&lt;"</span>);</span><br><span class="line">  str = str.replace(<span class="regexp">/&amp;lt;/g</span>, <span class="string">"&lt;"</span>);</span><br><span class="line">  str = str.replace(<span class="regexp">/&amp;quot;/g</span>, <span class="string">'\"'</span>);</span><br><span class="line">  str = str.replace(<span class="regexp">/&amp;acute;/g</span>, <span class="string">"\'"</span>);</span><br><span class="line">  <span class="keyword">return</span> str;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h3 id="判断登录设备是PC还是手机"><a href="#判断登录设备是PC还是手机" class="headerlink" title="判断登录设备是PC还是手机"></a>判断登录设备是PC还是手机</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">isPc() &#123;</span><br><span class="line">    <span class="keyword">let</span> userAgentInfo = navigator.userAgent;</span><br><span class="line">    <span class="keyword">let</span> Agents = [<span class="string">"Android"</span>, <span class="string">"iPhone"</span>, <span class="string">"SymbianOS"</span>, <span class="string">"Windows Phone"</span>, <span class="string">"iPad"</span>, <span class="string">"iPod"</span>];  <span class="comment">//判断用户代理头信息</span></span><br><span class="line">    <span class="keyword">let</span> flag = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> v = <span class="number">0</span>; v &lt; Agents.length; v++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (userAgentInfo.indexOf(Agents[v]) !== <span class="number">-1</span>) &#123;</span><br><span class="line">        flag = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flag;   <span class="comment">//true为pc端，false为非pc端</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h3 id="清除localstorage时-指定不清除的项"><a href="#清除localstorage时-指定不清除的项" class="headerlink" title="清除localstorage时 指定不清除的项 []"></a>清除localstorage时 指定不清除的项 []</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">clearStorage(storeKeyArr) &#123;</span><br><span class="line">    <span class="keyword">let</span> store = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(localStorage));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">in</span> store)&#123;</span><br><span class="line">        <span class="keyword">if</span>(!storeKeyArr.includes(key))&#123;</span><br><span class="line">        localStorage.removeItem(key)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="对JSON根据某一对象的属性进行排序"><a href="#对JSON根据某一对象的属性进行排序" class="headerlink" title="对JSON根据某一对象的属性进行排序"></a>对JSON根据某一对象的属性进行排序</h3><p>json：JSON数组  attr：排序依据属性  type：默认从高到低<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">orderby(json, attr, type) &#123;</span><br><span class="line">  <span class="keyword">return</span> json.sort(<span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> value1 = a[attr];</span><br><span class="line">    <span class="keyword">let</span> value2 = b[attr];</span><br><span class="line">    <span class="keyword">return</span> type === <span class="string">"down"</span> ? value1 - value2 : value2 - value1;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><h3 id="时间格式化"><a href="#时间格式化" class="headerlink" title="时间格式化"></a>时间格式化</h3><p>fmt：格式  obj：Date对象 （yyyy-MM-dd hh:mm:ss.S）<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">dateFormat(fmt, obj) &#123; <span class="comment">// author: meizz</span></span><br><span class="line">  <span class="keyword">let</span> o = &#123;</span><br><span class="line">    <span class="string">"M+"</span>: obj.getMonth() + <span class="number">1</span>, <span class="comment">// 月份</span></span><br><span class="line">    <span class="string">"d+"</span>: obj.getDate(), <span class="comment">// 日</span></span><br><span class="line">    <span class="string">"h+"</span>: obj.getHours(), <span class="comment">// 小时</span></span><br><span class="line">    <span class="string">"m+"</span>: obj.getMinutes(), <span class="comment">// 分</span></span><br><span class="line">    <span class="string">"s+"</span>: obj.getSeconds(), <span class="comment">// 秒</span></span><br><span class="line">    <span class="string">"q+"</span>: <span class="built_in">Math</span>.floor((obj.getMonth() + <span class="number">3</span>) / <span class="number">3</span>), <span class="comment">// 季度</span></span><br><span class="line">    <span class="string">"S"</span>: obj.getMilliseconds(),</span><br><span class="line">    <span class="comment">// 毫秒</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">if</span> (<span class="regexp">/(y+)/</span>.test(fmt)) &#123;</span><br><span class="line">    fmt = fmt.replace(<span class="built_in">RegExp</span>.$<span class="number">1</span>, (obj.getFullYear() + <span class="string">""</span>).substr(<span class="number">4</span> - <span class="built_in">RegExp</span>.$<span class="number">1.</span>length));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> k <span class="keyword">in</span> o) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"("</span> + k + <span class="string">")"</span>).test(fmt)) &#123;</span><br><span class="line">      fmt = fmt.replace(<span class="built_in">RegExp</span>.$<span class="number">1</span>, (<span class="built_in">RegExp</span>.$<span class="number">1.</span>length == <span class="number">1</span>) ? (o[k]) : ((<span class="string">"00"</span> + o[k]).substr((<span class="string">""</span> + o[k]).length)));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> fmt;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><h3 id="获取指定日期的前几天或后几天"><a href="#获取指定日期的前几天或后几天" class="headerlink" title="获取指定日期的前几天或后几天"></a>获取指定日期的前几天或后几天</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">getThatDate(date, num) &#123;</span><br><span class="line">    <span class="keyword">let</span> trans_day = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">let</span> cur_date = <span class="keyword">new</span> <span class="built_in">Date</span>(date);</span><br><span class="line">    <span class="keyword">let</span> cur_year = <span class="keyword">new</span> <span class="built_in">Date</span>(date).getFullYear();</span><br><span class="line">    <span class="keyword">let</span> cur_month = cur_date.getMonth() + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">let</span> real_date = cur_date.getDate();</span><br><span class="line">    cur_month = cur_month &gt; <span class="number">9</span> ? cur_month : (<span class="string">"0"</span> + cur_month);</span><br><span class="line">    real_date = real_date &gt; <span class="number">9</span> ? real_date : (<span class="string">"0"</span> + real_date);</span><br><span class="line">    <span class="keyword">let</span> eT = cur_year + <span class="string">"-"</span> + cur_month + <span class="string">"-"</span> + real_date;</span><br><span class="line">    trans_day = <span class="keyword">this</span>.transDate(eT, num);</span><br><span class="line">    <span class="keyword">return</span> trans_day;</span><br><span class="line">&#125;,</span><br><span class="line">transDate(dateParameter, num) &#123;</span><br><span class="line">    <span class="keyword">let</span> translateDate = <span class="string">""</span>,</span><br><span class="line">        dateString = <span class="string">""</span>,</span><br><span class="line">        monthString = <span class="string">""</span>,</span><br><span class="line">        dayString = <span class="string">""</span>;</span><br><span class="line">    translateDate = dateParameter.replace(<span class="string">"-"</span>, <span class="string">"/"</span>).replace(<span class="string">"-"</span>, <span class="string">"/"</span>);</span><br><span class="line">    <span class="keyword">let</span> newDate = <span class="keyword">new</span> <span class="built_in">Date</span>(translateDate);</span><br><span class="line">    newDate = newDate.valueOf();</span><br><span class="line">    newDate = newDate + num * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>;</span><br><span class="line">    newDate = <span class="keyword">new</span> <span class="built_in">Date</span>(newDate);</span><br><span class="line">    <span class="keyword">if</span> ((newDate.getMonth() + <span class="number">1</span>).toString().length === <span class="number">1</span>) &#123;</span><br><span class="line">        monthString = <span class="number">0</span> + <span class="string">""</span> + (newDate.getMonth() + <span class="number">1</span>).toString();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        monthString = (newDate.getMonth() + <span class="number">1</span>).toString();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (newDate.getDate().toString().length === <span class="number">1</span>) &#123;</span><br><span class="line">        dayString = <span class="number">0</span> + <span class="string">""</span> + newDate.getDate().toString();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        dayString = newDate.getDate().toString();</span><br><span class="line">    &#125;</span><br><span class="line">    dateString = newDate.getFullYear() + <span class="string">"-"</span> + monthString + <span class="string">"-"</span> + dayString;</span><br><span class="line">    <span class="keyword">return</span> dateString;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h3 id="根据传入时间计算当前日期所在周的开始日期和结束日期"><a href="#根据传入时间计算当前日期所在周的开始日期和结束日期" class="headerlink" title="根据传入时间计算当前日期所在周的开始日期和结束日期"></a>根据传入时间计算当前日期所在周的开始日期和结束日期</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">getTimeSlot(date) &#123;</span><br><span class="line">  <span class="keyword">let</span> sWeek;  <span class="comment">//开始的星期</span></span><br><span class="line">  <span class="keyword">let</span> eWeek;  <span class="comment">//结束的星期</span></span><br><span class="line">  <span class="keyword">if</span> (date.getDay() === <span class="number">0</span>) &#123;</span><br><span class="line">    sWeek = date.getDay() + <span class="number">6</span>;</span><br><span class="line">    eWeek = date.getDay();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    sWeek = date.getDay() - <span class="number">1</span>;</span><br><span class="line">    eWeek = <span class="number">7</span> - date.getDay();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//获取开始日期</span></span><br><span class="line">  <span class="keyword">let</span> sTime = date.getTime() - sWeek * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>;  <span class="comment">//获取开始星期的时间戳</span></span><br><span class="line">  <span class="keyword">let</span> startDate = <span class="keyword">new</span> <span class="built_in">Date</span>(sTime);  <span class="comment">//转换时间戳</span></span><br><span class="line">  <span class="keyword">let</span> sDate = startDate.getFullYear() + <span class="string">"年"</span> + (startDate.getMonth() + <span class="number">1</span>) + <span class="string">"月"</span> + startDate.getDate() + <span class="string">"日"</span>;</span><br><span class="line">  <span class="comment">//获取结束日期</span></span><br><span class="line">  <span class="keyword">let</span> eTime = date.getTime() + eWeek * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>;</span><br><span class="line">  <span class="keyword">let</span> endDate = <span class="keyword">new</span> <span class="built_in">Date</span>(eTime); <span class="comment">//时间戳转换</span></span><br><span class="line">  <span class="keyword">let</span> eDate = endDate.getFullYear() + <span class="string">"年"</span> + (endDate.getMonth() + <span class="number">1</span>) + <span class="string">"月"</span> + endDate.getDate() + <span class="string">"日"</span>;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    startDate: startDate,</span><br><span class="line">    endDate: endDate,</span><br><span class="line">    sDate: sDate,</span><br><span class="line">    eDate: eDate</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h3 id="根据传入时间计算当前时间是该月份的第几周-以周日作为节点，d时间对象-必须是系统原生时间对象"><a href="#根据传入时间计算当前时间是该月份的第几周-以周日作为节点，d时间对象-必须是系统原生时间对象" class="headerlink" title="根据传入时间计算当前时间是该月份的第几周,以周日作为节点，d时间对象,必须是系统原生时间对象;"></a>根据传入时间计算当前时间是该月份的第几周,以周日作为节点，d时间对象,必须是系统原生时间对象;</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">calcWeek(d) &#123;</span><br><span class="line">  <span class="keyword">let</span> now = d.getTime(); <span class="comment">//当前时间戳</span></span><br><span class="line">  <span class="keyword">let</span> res = &#123;<span class="attr">now</span>: d.getTime()&#125;; <span class="comment">//组装返回数据</span></span><br><span class="line">  <span class="keyword">let</span> oneDayLong = <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>; <span class="comment">//一天时间长度</span></span><br><span class="line">  <span class="comment">//根据当前时间获取周日</span></span><br><span class="line">  <span class="keyword">let</span> monthHead = <span class="keyword">new</span> <span class="built_in">Date</span>(d.getFullYear(), d.getMonth(), <span class="number">1</span>).getTime(); <span class="comment">//月初时间戳</span></span><br><span class="line">  <span class="keyword">let</span> monthEnd = <span class="keyword">new</span> <span class="built_in">Date</span>(d.getFullYear(), d.getMonth() + <span class="number">1</span>, <span class="number">1</span>).getTime() - <span class="number">24</span> * <span class="number">3600</span> * <span class="number">1000</span>; <span class="comment">//月末时间戳</span></span><br><span class="line">  <span class="keyword">let</span> wd;<span class="comment">//根据传入时间计算传入日期对应的截止时间戳</span></span><br><span class="line">  <span class="keyword">if</span> (d.getDay() === <span class="number">0</span>) &#123;</span><br><span class="line">    wd = now</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    wd = now + (<span class="number">7</span> - d.getDay()) * oneDayLong</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (wd &gt; monthEnd) &#123;</span><br><span class="line">    <span class="comment">//截止大于月底就是下月的第一周</span></span><br><span class="line">    res.week = <span class="number">1</span>;</span><br><span class="line">    res.month = <span class="keyword">new</span> <span class="built_in">Date</span>(d).getMonth() + <span class="number">2</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">new</span> <span class="built_in">Date</span>(wd).getDate() &lt;= <span class="number">7</span>) &#123;</span><br><span class="line">    <span class="comment">//截止小于7号就是本月第一周</span></span><br><span class="line">    res.week = <span class="number">1</span>;</span><br><span class="line">    res.month = <span class="keyword">new</span> <span class="built_in">Date</span>(d).getMonth() + <span class="number">1</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">new</span> <span class="built_in">Date</span>(monthHead).getDay() === <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="comment">//本月一号是周一的情况下,截止除以7就是第几周</span></span><br><span class="line">    res.week = <span class="keyword">new</span> <span class="built_in">Date</span>(wd).getDate() / <span class="number">7</span>;</span><br><span class="line">    res.month = <span class="keyword">new</span> <span class="built_in">Date</span>(d).getMonth() + <span class="number">1</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//截止 日期 减去第一周天数 除以7再加一就是第几周</span></span><br><span class="line">    <span class="keyword">let</span> weekDayDate = <span class="keyword">new</span> <span class="built_in">Date</span>(wd).getDate(); <span class="comment">//截止日期</span></span><br><span class="line">    <span class="keyword">let</span> firstWeekDays = <span class="keyword">new</span> <span class="built_in">Date</span>(monthHead).getDay(); <span class="comment">//当月第一周长度</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">new</span> <span class="built_in">Date</span>(monthHead).getDay() === <span class="number">0</span>) &#123;</span><br><span class="line">      firstWeekDays = <span class="number">1</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      firstWeekDays = <span class="number">8</span> - <span class="keyword">new</span> <span class="built_in">Date</span>(monthHead).getDay()</span><br><span class="line">    &#125;</span><br><span class="line">    res.week = (weekDayDate - firstWeekDays) / <span class="number">7</span> + <span class="number">1</span>;</span><br><span class="line">    res.month = <span class="keyword">new</span> <span class="built_in">Date</span>(d).getMonth() + <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h3 id="上传文件"><a href="#上传文件" class="headerlink" title="上传文件"></a>上传文件</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br></pre></td><td class="code"><pre><span class="line">uploader(obj) &#123;</span><br><span class="line">  <span class="comment">//变量定义区</span></span><br><span class="line">  <span class="keyword">let</span> config=obj;</span><br><span class="line">  <span class="comment">// const qiniuUrl = 'https://upload.qiniup.com'; //上传接口</span></span><br><span class="line">  <span class="keyword">let</span> exitMsg = &#123;&#125;; <span class="comment">//对外消息通知</span></span><br><span class="line">  <span class="keyword">let</span> proStatus = <span class="literal">true</span>;<span class="comment">//前进状态</span></span><br><span class="line">  <span class="comment">//accept属性列表</span></span><br><span class="line">  <span class="keyword">let</span> acceptList = &#123;</span><br><span class="line">    <span class="string">"3gpp"</span>: <span class="string">"audio/3gpp, video/3gpp"</span>,</span><br><span class="line">    ac3: <span class="string">"audio/ac3"</span>,</span><br><span class="line">    asf: <span class="string">"allpication/vnd.ms-asf"</span>,</span><br><span class="line">    au: <span class="string">"audio/basic"</span>,</span><br><span class="line">    css: <span class="string">"text/css"</span>,</span><br><span class="line">    csv: <span class="string">"text/csv"</span>,</span><br><span class="line">    doc: <span class="string">"application/msword"</span>,</span><br><span class="line">    dot: <span class="string">"application/msword"</span>,</span><br><span class="line">    dtd: <span class="string">"application/xml-dtd"</span>,</span><br><span class="line">    dwg: <span class="string">"image/vnd.dwg"</span>,</span><br><span class="line">    dxf: <span class="string">"image/vnd.dxf"</span>,</span><br><span class="line">    gif: <span class="string">"image/gif"</span>,</span><br><span class="line">    htm: <span class="string">"text/html"</span>,</span><br><span class="line">    html: <span class="string">"text/html"</span>,</span><br><span class="line">    jp2: <span class="string">"image/jp2"</span>,</span><br><span class="line">    jpe: <span class="string">"image/jpeg"</span>,</span><br><span class="line">    jpeg: <span class="string">"image/jpeg"</span>,</span><br><span class="line">    jpg: <span class="string">"image/jpeg"</span>,</span><br><span class="line">    js: <span class="string">"text/javascript, application/javascript"</span>,</span><br><span class="line">    json: <span class="string">"application/json"</span>,</span><br><span class="line">    mp2: <span class="string">"audio/mpeg, video/mpeg"</span>,</span><br><span class="line">    mp3: <span class="string">"audio/mpeg"</span>,</span><br><span class="line">    mp4: <span class="string">"audio/mp4, video/mp4"</span>,</span><br><span class="line">    mpeg: <span class="string">"video/mpeg"</span>,</span><br><span class="line">    mpg: <span class="string">"video/mpeg"</span>,</span><br><span class="line">    mpp: <span class="string">"application/vnd.ms-project"</span>,</span><br><span class="line">    ogg: <span class="string">"application/ogg, audio/ogg"</span>,</span><br><span class="line">    pdf: <span class="string">"application/pdf"</span>,</span><br><span class="line">    png: <span class="string">"image/png"</span>,</span><br><span class="line">    pot: <span class="string">"application/vnd.ms-powerpoint"</span>,</span><br><span class="line">    pps: <span class="string">"application/vnd.ms-powerpoint"</span>,</span><br><span class="line">    ppt: <span class="string">"application/vnd.ms-powerpoint"</span>,</span><br><span class="line">    rtf: <span class="string">"application/rtf, text/rtf"</span>,</span><br><span class="line">    svf: <span class="string">"image/vnd.svf"</span>,</span><br><span class="line">    tif: <span class="string">"image/tiff"</span>,</span><br><span class="line">    tiff: <span class="string">"image/tiff"</span>,</span><br><span class="line">    txt: <span class="string">"text/plain"</span>,</span><br><span class="line">    wdb: <span class="string">"application/vnd.ms-works"</span>,</span><br><span class="line">    wps: <span class="string">"application/vnd.ms-works"</span>,</span><br><span class="line">    xhtml: <span class="string">"application/xhtml+xml"</span>,</span><br><span class="line">    xlc: <span class="string">"application/vnd.ms-excel"</span>,</span><br><span class="line">    xlm: <span class="string">"application/vnd.ms-excel"</span>,</span><br><span class="line">    xls: <span class="string">"application/vnd.ms-excel"</span>,</span><br><span class="line">    xlt: <span class="string">"application/vnd.ms-excel"</span>,</span><br><span class="line">    xlw: <span class="string">"application/vnd.ms-excel"</span>,</span><br><span class="line">    xml: <span class="string">"text/xml, application/xml"</span>,</span><br><span class="line">    zip: <span class="string">"aplication/zip"</span>,</span><br><span class="line">    xlsx: <span class="string">"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"</span>,</span><br><span class="line">    xltx: <span class="string">"application/vnd.openxmlformats-officedocument.spreadsheetml.template"</span>,</span><br><span class="line">    potx: <span class="string">"application/vnd.openxmlformats-officedocument.presentationml.template"</span>,</span><br><span class="line">    ppsx: <span class="string">"application/vnd.openxmlformats-officedocument.presentationml.slideshow"</span>,</span><br><span class="line">    pptx: <span class="string">"application/vnd.openxmlformats-officedocument.presentationml.presentation"</span>,</span><br><span class="line">    sldx: <span class="string">"application/vnd.openxmlformats-officedocument.presentationml.slide"</span>,</span><br><span class="line">    docx: <span class="string">"application/vnd.openxmlformats-officedocument.wordprocessingml.document"</span>,</span><br><span class="line">    dotx: <span class="string">"application/vnd.openxmlformats-officedocument.wordprocessingml.template"</span>,</span><br><span class="line">    xlsm: <span class="string">"application/vnd.ms-excel.addin.macroEnabled.12"</span>,</span><br><span class="line">    xlsb: <span class="string">"application/vnd.ms-excel.sheet.binary.macroEnabled.12"</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">//创建input元素</span></span><br><span class="line">  <span class="keyword">let</span> upIpt = <span class="built_in">document</span>.createElement(<span class="string">'input'</span>);</span><br><span class="line">  <span class="keyword">let</span> body = <span class="built_in">document</span>.querySelector(<span class="string">'body'</span>);</span><br><span class="line">  upIpt.type = <span class="string">'file'</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//将可接受的文件类型添加给input</span></span><br><span class="line">  <span class="keyword">if</span> (obj.hasOwnProperty(<span class="string">'accept'</span>) &amp;&amp; obj.accept.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> accetpArr = [];</span><br><span class="line">    <span class="keyword">let</span> flag = <span class="literal">true</span>;</span><br><span class="line">    obj.accept.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (acceptList.hasOwnProperty(e)) &#123;</span><br><span class="line">        accetpArr.push(acceptList[e])</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        errorFn(<span class="string">'没有找到文件类型:'</span> + e);</span><br><span class="line">        flag = <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">      upIpt.accept = accetpArr.join(<span class="string">','</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  upIpt.style = <span class="string">'display:none'</span>;</span><br><span class="line">  body.appendChild(upIpt);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//监听上传元素值改变</span></span><br><span class="line">  upIpt.onchange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> val = upIpt.value;</span><br><span class="line">    <span class="keyword">if</span> (val) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//上传之前回调</span></span><br><span class="line">      <span class="keyword">if</span> (obj.hasOwnProperty(<span class="string">'beforeUpload'</span>)) &#123;</span><br><span class="line">        obj.beforeUpload();</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//验证文件</span></span><br><span class="line">      checkFile(upIpt, obj.size);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//获取token然后开始上传</span></span><br><span class="line">      <span class="keyword">if</span> (proStatus) &#123;</span><br><span class="line">        getToken(uploadFile)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//验证文件</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">checkFile</span>(<span class="params">obj, size</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (size &amp;&amp; !<span class="regexp">/^[1-9]\d*$/</span>.test(size)) &#123;</span><br><span class="line">      errorFn(<span class="string">'文件大小必须是正整数'</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> file;</span><br><span class="line">    <span class="keyword">let</span> isIE = <span class="regexp">/msie/i</span>.test(navigator.userAgent) &amp;&amp; !<span class="built_in">window</span>.opera;</span><br><span class="line">    <span class="keyword">if</span> (isIE &amp;&amp; !obj.files) &#123;</span><br><span class="line">      <span class="keyword">let</span> filePath = obj.value;</span><br><span class="line">      <span class="keyword">let</span> fileSystem = <span class="keyword">new</span> ActiveXObject(<span class="string">"Scripting.FileSystemObject"</span>);</span><br><span class="line">      file = fileSystem.GetFile(filePath);</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      file = obj.files[<span class="number">0</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="keyword">let</span>  fileSize = <span class="built_in">Math</span>.round(file.size / <span class="number">1024</span> * <span class="number">100</span>) / <span class="number">100</span>; <span class="comment">//单位为KB</span></span><br><span class="line">    <span class="keyword">if</span> (size &amp;&amp; fileSize &gt;= size) &#123;</span><br><span class="line">      errorFn(<span class="string">'上传文件不能超过:'</span> + size + <span class="string">"kb"</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(config.hasOwnProperty(<span class="string">'checkSlot'</span>))&#123;</span><br><span class="line">        <span class="keyword">if</span>(!config.checkSlot(file))&#123;</span><br><span class="line">          errorFn(<span class="string">'自定义条件验证失败'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 获取token</span></span><br><span class="line">  <span class="keyword">let</span> getToken = <span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    <span class="comment">// 获取七牛token</span></span><br><span class="line">    <span class="comment">// xhr.open("POST", 'https://toolapi.mayte.cn/qt2', true);</span></span><br><span class="line">    xhr.setRequestHeader(<span class="string">"Content-Type"</span>, <span class="string">"application/x-www-form-urlencoded;charset=UTF-8"</span>);</span><br><span class="line">    xhr.setRequestHeader(<span class="string">"Accept"</span>, <span class="string">"application/json, text/javascript, */*; q=0.01"</span>);</span><br><span class="line">    xhr.setRequestHeader(<span class="string">"X-Requested-With"</span>, <span class="string">"XMLHttpRequest"</span>);</span><br><span class="line">    xhr.send();</span><br><span class="line">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (xhr.readyState === <span class="number">4</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (xhr.status === <span class="number">200</span>) &#123;</span><br><span class="line">          fn &amp;&amp; fn(xhr.responseText)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          errorFn(<span class="string">'token获取出错,错误代码:'</span> + xhr.status)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//上传文件</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">uploadFile</span>(<span class="params">token</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> file, directory;</span><br><span class="line">    <span class="keyword">let</span> isIE = <span class="regexp">/msie/i</span>.test(navigator.userAgent) &amp;&amp; !<span class="built_in">window</span>.opera;</span><br><span class="line">    <span class="keyword">if</span> (isIE &amp;&amp; !upIpt.files) &#123;</span><br><span class="line">      <span class="keyword">let</span> filePath = upIpt.value;</span><br><span class="line">      <span class="keyword">let</span> fileSystem = <span class="keyword">new</span> ActiveXObject(<span class="string">"Scripting.FileSystemObject"</span>);</span><br><span class="line">      file = fileSystem.GetFile(filePath);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      file = upIpt.files[<span class="number">0</span>]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> form = <span class="keyword">new</span> FormData();</span><br><span class="line">    form.append(<span class="string">'file'</span>, file);</span><br><span class="line">    form.append(<span class="string">'token'</span>, token);</span><br><span class="line">    form.append(<span class="string">'x:folder'</span>, directory);</span><br><span class="line">    <span class="keyword">let</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    xhr.open(<span class="string">'POST'</span>, qiniuUrl, <span class="literal">true</span>);</span><br><span class="line">    xhr.setRequestHeader(<span class="string">'Accept'</span>, <span class="string">'application/json, text/javascript, */*; q=0.01'</span>);</span><br><span class="line">    xhr.upload.onprogress = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (obj.hasOwnProperty(<span class="string">'progress'</span>)) &#123;</span><br><span class="line">        obj.progress(event)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (xhr.readyState === <span class="number">4</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (obj.hasOwnProperty(<span class="string">'whatever'</span>)) &#123;</span><br><span class="line">          obj.whatever()</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (xhr.status === <span class="number">200</span>) &#123;</span><br><span class="line">          <span class="keyword">if</span> (obj.hasOwnProperty(<span class="string">'success'</span>)) &#123;</span><br><span class="line">            obj.success(xhr.responseText)</span><br><span class="line">          &#125;</span><br><span class="line">          upIpt.remove();<span class="comment">//移除上传标签</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          errorFn(<span class="string">'上传是出错,错误代码:'</span> + xhr.status + <span class="string">" "</span> + xhr.responseText)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    xhr.send(form) <span class="comment">//发射</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 获取文件类型</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getFileSuffix</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!item) <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">let</span> els = item.split(<span class="string">'.'</span>);</span><br><span class="line">    <span class="keyword">return</span> (els[els.length - <span class="number">1</span>].split(<span class="string">'-'</span>))[<span class="number">0</span>]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//虚拟点击</span></span><br><span class="line">  upIpt.click();</span><br><span class="line"></span><br><span class="line">  <span class="comment">//抛出错误信息</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">errorFn</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">    exitMsg.status = <span class="number">0</span>;</span><br><span class="line">    exitMsg.msg = d;</span><br><span class="line">    proStatus = <span class="literal">false</span>; <span class="comment">//不再继续</span></span><br><span class="line">    upIpt.remove(); <span class="comment">//删除上传标签</span></span><br><span class="line">    <span class="keyword">if</span> (obj.hasOwnProperty(<span class="string">'fail'</span>)) &#123;</span><br><span class="line">      obj.fail(exitMsg)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (obj.hasOwnProperty(<span class="string">'whatever'</span>)) &#123;</span><br><span class="line">      obj.whatever()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h3 id="身份证验证"><a href="#身份证验证" class="headerlink" title="身份证验证"></a>身份证验证</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">decideIdcard(value) &#123;</span><br><span class="line">  <span class="keyword">if</span> (value.length === <span class="number">15</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> reg = <span class="regexp">/^[1-9][0-9]&#123;5&#125;[2-9][0-9](0[1-9]|1[0-2])(0[1-9]|[1-2][0-9]|3[0-1])[0-9]&#123;3&#125;$/</span>;</span><br><span class="line">    <span class="keyword">return</span> reg.test(value);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (value.length === <span class="number">18</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> xiaoYan = [<span class="string">"1"</span>, <span class="string">"0"</span>, <span class="string">"X"</span>, <span class="string">"9"</span>, <span class="string">"8"</span>, <span class="string">"7"</span>, <span class="string">"6"</span>, <span class="string">"5"</span>, <span class="string">"4"</span>, <span class="string">"3"</span>, <span class="string">"2"</span>];</span><br><span class="line">    <span class="keyword">let</span> xiao = [<span class="string">"1"</span>, <span class="string">"0"</span>, <span class="string">"x"</span>, <span class="string">"9"</span>, <span class="string">"8"</span>, <span class="string">"7"</span>, <span class="string">"6"</span>, <span class="string">"5"</span>, <span class="string">"4"</span>, <span class="string">"3"</span>, <span class="string">"2"</span>];</span><br><span class="line">    <span class="keyword">let</span> yuShu = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>];</span><br><span class="line">    <span class="keyword">let</span> xiShu = [<span class="number">7</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">2</span>];</span><br><span class="line">    <span class="keyword">let</span> cardArray = value.split(<span class="string">""</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; cardArray.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">      sum += <span class="built_in">parseInt</span>(cardArray[i]) * xiShu[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> yu = sum % <span class="number">11</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; yuShu.length; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (yu === yuShu[i]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (value.substring(value.length - <span class="number">1</span>).toUpperCase() === xiaoYan[i]) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h3 id="判断是否为空"><a href="#判断是否为空" class="headerlink" title="判断是否为空"></a>判断是否为空</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">isEmpty(val) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> val === <span class="string">'number'</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (!val || val === <span class="literal">undefined</span> || <span class="keyword">typeof</span> val === <span class="string">'undefined'</span> || val === <span class="literal">null</span> || val === <span class="string">'undefined'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- 已经写好的文章在对应的md文件头部添加top：{number}即可 数值越大优先级越高 --&gt;
&lt;h3 id=&quot;cookie的获取、设置、删除&quot;&gt;&lt;a href=&quot;#cookie的获取、设置、删除&quot; class=&quot;headerlink&quot; title=&quot;cookie的获取
      
    
    </summary>
    
      <category term="js" scheme="wanderfully.club/categories/js/"/>
    
    
      <category term="js" scheme="wanderfully.club/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>两种对象方法区别</title>
    <link href="wanderfully.club/2019/05/25/%E4%B8%A4%E7%A7%8D%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95%E5%8C%BA%E5%88%AB/"/>
    <id>wanderfully.club/2019/05/25/两种对象方法区别/</id>
    <published>2019-05-25T07:34:32.000Z</published>
    <updated>2019-05-28T02:16:37.470Z</updated>
    
    <content type="html"><![CDATA[<!-- 已经写好的文章在对应的md文件头部添加top：{number}即可 数值越大优先级越高 --><h3 id="原型法（可访问所有的方法和属性）"><a href="#原型法（可访问所有的方法和属性）" class="headerlink" title="原型法（可访问所有的方法和属性）"></a>原型法（可访问所有的方法和属性）</h3><p>通过构造函数的prototype，这种写法会将全部的prototype上的属性方法全部暴露出来：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> Drage = <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = obj.name;</span><br><span class="line">        ......</span><br><span class="line">        ......</span><br><span class="line">    &#125;</span><br><span class="line">    Drage.prototype = &#123;</span><br><span class="line">        add:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        &#125;,</span><br><span class="line">        del:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        &#125;</span><br><span class="line">        .......</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">window</span>.Drage = Drage;</span><br><span class="line">&#125;)(<span class="built_in">window</span>,<span class="built_in">document</span>)</span><br></pre></td></tr></table></figure></p><h3 id="对象法（返回指定的方法或属性）"><a href="#对象法（返回指定的方法或属性）" class="headerlink" title="对象法（返回指定的方法或属性）"></a>对象法（返回指定的方法或属性）</h3><p>如果不想将prototype上的属性和方法暴露出来，只是想暴露某一个方法或属性，并且不用什么配置的话，可以通过返回来暴露所需要的东西：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="built_in">module</span> = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> b = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">var</span> listen = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"小明"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a+b;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> sing = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> name = listen();</span><br><span class="line">        <span class="keyword">return</span> name+<span class="string">"在sing"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">        add:add,</span><br><span class="line">        sing:sing</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure></p><p>调用方式：</p><blockquote><p>modoule.sing();modoule.add();</p></blockquote><p>listen方法没有暴露出来，所以可以自己定义想暴露出来的方法</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- 已经写好的文章在对应的md文件头部添加top：{number}即可 数值越大优先级越高 --&gt;
&lt;h3 id=&quot;原型法（可访问所有的方法和属性）&quot;&gt;&lt;a href=&quot;#原型法（可访问所有的方法和属性）&quot; class=&quot;headerlink&quot; title=&quot;原型法（可访问
      
    
    </summary>
    
      <category term="js" scheme="wanderfully.club/categories/js/"/>
    
    
      <category term="js" scheme="wanderfully.club/tags/js/"/>
    
      <category term="原型" scheme="wanderfully.club/tags/%E5%8E%9F%E5%9E%8B/"/>
    
  </entry>
  
  <entry>
    <title>js中的一些小技巧</title>
    <link href="wanderfully.club/2019/05/24/js%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E5%B0%8F%E6%8A%80%E5%B7%A7/"/>
    <id>wanderfully.club/2019/05/24/js中的一些小技巧/</id>
    <published>2019-05-24T09:43:05.000Z</published>
    <updated>2019-05-28T02:16:06.426Z</updated>
    
    <content type="html"><![CDATA[<!-- 已经写好的文章在对应的md文件头部添加top：{number}即可 数值越大优先级越高 --><h3 id="实用型"><a href="#实用型" class="headerlink" title="实用型"></a>实用型</h3><h4 id="获取url查询参数"><a href="#获取url查询参数" class="headerlink" title="获取url查询参数"></a>获取url查询参数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> q = &#123;&#125;;</span><br><span class="line">location.search.replace(<span class="regexp">/([^?&amp;=]+)=([^&amp;]+)/g</span>,(_,k,v)=&gt;q[k] = v);</span><br><span class="line"><span class="built_in">console</span>.log(q)</span><br><span class="line"><span class="string">``</span><span class="string">` </span></span><br><span class="line"><span class="string">#### reduce用法</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>javascript</span><br><span class="line"><span class="comment">// 统计数组中相同项的个数</span></span><br><span class="line"><span class="keyword">var</span> cars = [<span class="string">'BMW'</span>,<span class="string">'Benz'</span>, <span class="string">'Benz'</span>, <span class="string">'Tesla'</span>, <span class="string">'BMW'</span>, <span class="string">'Toyota'</span>];</span><br><span class="line"><span class="keyword">var</span> carsObj = cars.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">obj, name,index,arr</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// obj：初始值 后面定义的  name：循环的item值  index：索引  arr：原数组</span></span><br><span class="line">    obj[name] = obj[name] ? ++obj[name] : <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;, &#123;&#125;);<span class="comment">//定义初始值</span></span><br></pre></td></tr></table></figure><h4 id="生成UUID"><a href="#生成UUID" class="headerlink" title="生成UUID"></a>生成UUID</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">getUUID()&#123;</span><br><span class="line">    <span class="keyword">var</span> chars = <span class="string">'0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'</span>.split(<span class="string">''</span>);</span><br><span class="line">    <span class="keyword">var</span> uuid = [];</span><br><span class="line">    <span class="keyword">var</span> i;</span><br><span class="line">    <span class="keyword">var</span> r;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">32</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!uuid[i]) &#123;</span><br><span class="line">            r = <span class="number">0</span> | <span class="built_in">Math</span>.random()*<span class="number">16</span>;</span><br><span class="line">            uuid[i] = chars[(i == <span class="number">19</span>) ? (r &amp; <span class="number">0x3</span>) | <span class="number">0x8</span> : r];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> uuid.join(<span class="string">''</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="获取过去多少天的日历数组"><a href="#获取过去多少天的日历数组" class="headerlink" title="获取过去多少天的日历数组"></a>获取过去多少天的日历数组</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> days = [...Array(<span class="number">7</span>).keys()].map(<span class="function"><span class="params">days</span> =&gt;</span> <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Date</span>.now() - <span class="number">86400000</span> * days))</span><br></pre></td></tr></table></figure><h4 id="字符窜比较时间先后"><a href="#字符窜比较时间先后" class="headerlink" title="字符窜比较时间先后"></a>字符窜比较时间先后</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> st = <span class="string">"2014-08-08"</span>;</span><br><span class="line"><span class="keyword">var</span> et = <span class="string">"2014-09-09"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(st&gt;et, st&lt;et); <span class="comment">// false true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"21:00"</span>&lt;<span class="string">"09:10"</span>);  <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"21:00"</span>&gt;<span class="string">"09:10"</span>);   <span class="comment">// true   时间形式注意补0</span></span><br></pre></td></tr></table></figure><h4 id="获取当前时间并每秒刷新"><a href="#获取当前时间并每秒刷新" class="headerlink" title="获取当前时间并每秒刷新"></a>获取当前时间并每秒刷新</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setInterval(<span class="function"><span class="params">()</span>=&gt;</span><span class="built_in">document</span>.body.innerHTML=<span class="keyword">new</span> <span class="built_in">Date</span>().toLocaleString().slice(<span class="number">10</span>,<span class="number">19</span>))</span><br></pre></td></tr></table></figure><h4 id="打乱数组"><a href="#打乱数组" class="headerlink" title="打乱数组"></a>打乱数组</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="function">(<span class="params">arr</span>) =&gt;</span> arr.slice().sort(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">Math</span>.random() - <span class="number">0.5</span>)</span><br><span class="line"><span class="keyword">let</span> b = a([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>])</span><br></pre></td></tr></table></figure><h4 id="生成随机颜色"><a href="#生成随机颜色" class="headerlink" title="生成随机颜色"></a>生成随机颜色</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'#'</span> + <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">0xffffff</span>).toString(<span class="number">16</span>).padEnd(<span class="number">6</span>, <span class="string">'0'</span>));</span><br><span class="line"><span class="comment">//#c618b2</span></span><br></pre></td></tr></table></figure><h4 id="数组去重"><a href="#数组去重" class="headerlink" title="数组去重"></a>数组去重</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr1 = [<span class="string">"ces"</span>,<span class="string">"ces"</span>,<span class="number">3</span>,<span class="string">"你好"</span>,<span class="string">"你好"</span>,<span class="number">1</span>,<span class="number">2</span>];</span><br><span class="line"><span class="keyword">let</span> newArr = [...new <span class="built_in">Set</span>(arr1)]</span><br></pre></td></tr></table></figure><h4 id="创建特定大小的数组"><a href="#创建特定大小的数组" class="headerlink" title="创建特定大小的数组"></a>创建特定大小的数组</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [...Array(<span class="number">3</span>).keys()] <span class="comment">//[0,1,2]</span></span><br></pre></td></tr></table></figure><h4 id="保留两位小数，不足补零"><a href="#保留两位小数，不足补零" class="headerlink" title="保留两位小数，不足补零"></a>保留两位小数，不足补零</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addZ</span>(<span class="params">num,len=<span class="number">2</span></span>)</span>&#123; </span><br><span class="line">    num=num.toString() </span><br><span class="line">    <span class="keyword">if</span>(!num.includes(<span class="string">'.'</span>)) num=num+<span class="string">'.'</span> </span><br><span class="line">    <span class="keyword">if</span>(!<span class="built_in">Object</span>.is(<span class="built_in">Number</span>(num),<span class="literal">NaN</span>))&#123; </span><br><span class="line">        num= <span class="built_in">Number</span>(num).toFixed(len)   </span><br><span class="line">        </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(num.includes(<span class="string">','</span>))&#123; </span><br><span class="line">        <span class="keyword">if</span>(!<span class="built_in">Object</span>.is(<span class="built_in">Number</span>(num.replace(<span class="regexp">/,/g</span>,<span class="string">''</span>)),<span class="literal">NaN</span>))&#123; </span><br><span class="line">        len=num.indexOf(<span class="string">'.'</span>)+<span class="built_in">Number</span>(len)+<span class="number">1</span> </span><br><span class="line">        num= num.length&lt;len? num.padEnd(len,<span class="string">'0'</span>):num; </span><br><span class="line">        &#125; </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> num </span><br><span class="line">&#125; </span><br><span class="line"><span class="built_in">console</span>.log(addZ(num,<span class="number">3</span>))</span><br></pre></td></tr></table></figure><h3 id="了解型（可读性比较差）"><a href="#了解型（可读性比较差）" class="headerlink" title="了解型（可读性比较差）"></a>了解型（可读性比较差）</h3><h4 id="取整-类似于parseInt"><a href="#取整-类似于parseInt" class="headerlink" title="取整 类似于parseInt"></a>取整 类似于parseInt</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">~~ <span class="number">3.14159</span> <span class="comment">//3</span></span><br><span class="line"><span class="number">3.14159</span> &gt;&gt; <span class="number">0</span> <span class="comment">//3</span></span><br><span class="line"><span class="number">3.14159</span> | <span class="number">0</span> <span class="comment">//3</span></span><br></pre></td></tr></table></figure><h4 id="比较值是否相等-会将字符窜转化为数字，相等返回0，-不相等返回两个的和"><a href="#比较值是否相等-会将字符窜转化为数字，相等返回0，-不相等返回两个的和" class="headerlink" title="比较值是否相等 会将字符窜转化为数字，相等返回0， 不相等返回两个的和"></a>比较值是否相等 会将字符窜转化为数字，相等返回0， 不相等返回两个的和</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="string">'2'</span> ^ <span class="string">'22'</span>) <span class="comment">//24</span></span><br><span class="line">(<span class="string">'2'</span> ^ <span class="string">'呵'</span>) <span class="comment">//2</span></span><br><span class="line">(<span class="string">'33'</span> ^ <span class="string">'33'</span>) <span class="comment">//0</span></span><br></pre></td></tr></table></figure><h4 id="强制转化为数字"><a href="#强制转化为数字" class="headerlink" title="强制转化为数字"></a>强制转化为数字</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'32'</span> * <span class="number">1</span> <span class="comment">// * 1 转化</span></span><br><span class="line"> <span class="built_in">console</span>.log(+ <span class="string">'123'</span>) <span class="comment">// + 转化</span></span><br></pre></td></tr></table></figure><h4 id="四舍五入精确到指定小数点位数"><a href="#四舍五入精确到指定小数点位数" class="headerlink" title="四舍五入精确到指定小数点位数"></a>四舍五入精确到指定小数点位数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="number">129</span>;</span><br><span class="line"><span class="keyword">const</span> round = <span class="function">(<span class="params">n, decimals = <span class="number">0</span></span>) =&gt;</span> <span class="built_in">Number</span>(<span class="string">`<span class="subst">$&#123;<span class="built_in">Math</span>.round(<span class="string">`<span class="subst">$&#123;n&#125;</span>e<span class="subst">$&#123;decimals&#125;</span>`</span>)&#125;</span>e-<span class="subst">$&#123;decimals&#125;</span>`</span>)</span><br></pre></td></tr></table></figure><h4 id="数字补零"><a href="#数字补零" class="headerlink" title="数字补零"></a>数字补零</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> addZero1 = <span class="function">(<span class="params">num, len = <span class="number">2</span></span>) =&gt;</span> (<span class="string">`0<span class="subst">$&#123;num&#125;</span>`</span>).slice(-len)</span><br><span class="line"><span class="keyword">const</span> addZero2 = <span class="function">(<span class="params">num, len = <span class="number">2</span></span>) =&gt;</span> (<span class="string">`<span class="subst">$&#123;num&#125;</span>`</span>).padStart( len   , <span class="string">'0'</span>)</span><br><span class="line">addZero1(<span class="number">3</span>) <span class="comment">// 03</span></span><br><span class="line">addZero2(<span class="number">32</span>,<span class="number">4</span>)  <span class="comment">// 0032</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- 已经写好的文章在对应的md文件头部添加top：{number}即可 数值越大优先级越高 --&gt;
&lt;h3 id=&quot;实用型&quot;&gt;&lt;a href=&quot;#实用型&quot; class=&quot;headerlink&quot; title=&quot;实用型&quot;&gt;&lt;/a&gt;实用型&lt;/h3&gt;&lt;h4 id=&quot;获取url查询参
      
    
    </summary>
    
      <category term="js" scheme="wanderfully.club/categories/js/"/>
    
    
      <category term="js" scheme="wanderfully.club/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>canvas悬挂字体</title>
    <link href="wanderfully.club/2019/05/23/canvas%E6%82%AC%E6%8C%82%E5%AD%97%E4%BD%93/"/>
    <id>wanderfully.club/2019/05/23/canvas悬挂字体/</id>
    <published>2019-05-23T10:33:09.000Z</published>
    <updated>2019-05-24T03:17:41.762Z</updated>
    
    <content type="html"><![CDATA[<!-- 已经写好的文章在对应的md文件头部添加top：{number}即可 数值越大优先级越高 --><p><strong><a href="https://wanderfully.club/hangword/">在线demo</a></strong></p><h4 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h4><p>引入flaotfont.js<br>html中写canvas标签 并将id赋值为 id=’canvas’ 规定画布大小<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;canvas width=<span class="string">"900"</span> height=<span class="string">"300"</span> id=<span class="string">'canvas'</span>&gt;&lt;/canvas&gt;</span><br></pre></td></tr></table></figure></p><hr>]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- 已经写好的文章在对应的md文件头部添加top：{number}即可 数值越大优先级越高 --&gt;
&lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https://wanderfully.club/hangword/&quot;&gt;在线demo&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;h4 id=
      
    
    </summary>
    
      <category term="canvas" scheme="wanderfully.club/categories/canvas/"/>
    
    
      <category term="canvas" scheme="wanderfully.club/tags/canvas/"/>
    
  </entry>
  
  <entry>
    <title>react中px转rem或vw</title>
    <link href="wanderfully.club/2019/05/22/react%E4%B8%ADpx%E8%BD%ACrem%E6%88%96vw/"/>
    <id>wanderfully.club/2019/05/22/react中px转rem或vw/</id>
    <published>2019-05-22T07:32:22.000Z</published>
    <updated>2019-05-23T10:30:26.686Z</updated>
    
    <content type="html"><![CDATA[<!-- 已经写好的文章在对应的md文件头部添加top：{number}即可 数值越大优先级越高 --><h3 id="一、px转rem"><a href="#一、px转rem" class="headerlink" title="一、px转rem"></a>一、px转rem</h3><h4 id="执行显示webpack配置"><a href="#执行显示webpack配置" class="headerlink" title="执行显示webpack配置"></a>执行显示webpack配置</h4><p><code>npm run eject</code></p><h4 id="安装-postcss-px2rem-exclude、lib-flexible、sass-loader、node-sass"><a href="#安装-postcss-px2rem-exclude、lib-flexible、sass-loader、node-sass" class="headerlink" title="安装 postcss-px2rem-exclude、lib-flexible、sass-loader、node-sass"></a>安装 postcss-px2rem-exclude、lib-flexible、sass-loader、node-sass</h4><p><code>npm insatll lib-flexible sass-loader node-sass postcss-px2rem-exclude --save</code></p><h4 id="修改webpack-config-js-先引入postcss-px2rem-exclude-然后在postcss-loader的plugins中加入"><a href="#修改webpack-config-js-先引入postcss-px2rem-exclude-然后在postcss-loader的plugins中加入" class="headerlink" title="修改webpack.config.js,先引入postcss-px2rem-exclude,然后在postcss-loader的plugins中加入"></a>修改webpack.config.js,先引入postcss-px2rem-exclude,然后在postcss-loader的plugins中加入</h4><p><code>const px2rem = require(&#39;postcss-px2rem-exclude&#39;);</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    loader: <span class="built_in">require</span>.resolve(<span class="string">'postcss-loader'</span>),</span><br><span class="line">    options: &#123;</span><br><span class="line">        ident: <span class="string">'postcss'</span>,</span><br><span class="line">        plugins: <span class="function"><span class="params">()</span> =&gt;</span> [</span><br><span class="line">        <span class="built_in">require</span>(<span class="string">'postcss-flexbugs-fixes'</span>),</span><br><span class="line">        autoprefixer(&#123;</span><br><span class="line">            browsers: [</span><br><span class="line">            <span class="string">'&gt;1%'</span>,</span><br><span class="line">            <span class="string">'last 4 versions'</span>,</span><br><span class="line">            <span class="string">'Firefox ESR'</span>,</span><br><span class="line">            <span class="string">'not ie &lt; 9'</span>, <span class="comment">// React doesn't support IE8 anyway</span></span><br><span class="line">            ],</span><br><span class="line">            flexbox: <span class="string">'no-2009'</span>,</span><br><span class="line">        &#125;),</span><br><span class="line">    <span class="comment">//px2rem加在这里</span></span><br><span class="line">        px2rem(&#123;</span><br><span class="line">            remUnit:<span class="number">75</span>,<span class="attr">exclude</span>: <span class="regexp">/node_modules/i</span></span><br><span class="line">        &#125;)</span><br><span class="line">        ],</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><h4 id="在react入口文件引入lib-flexible"><a href="#在react入口文件引入lib-flexible" class="headerlink" title="在react入口文件引入lib-flexible"></a>在react入口文件引入lib-flexible</h4><p><code>import &quot;lib-flexible&quot;</code></p><h4 id="修改index-html-禁止缩放"><a href="#修改index-html-禁止缩放" class="headerlink" title="修改index.html 禁止缩放"></a>修改index.html 禁止缩放</h4><p><code>&lt;meta content=&quot;width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no&quot; name=&quot;viewport&quot; /&gt;</code></p><h4 id="完成后重启才能生效"><a href="#完成后重启才能生效" class="headerlink" title="完成后重启才能生效"></a>完成后重启才能生效</h4><p><code>npm start</code></p><h3 id="二、px转vw"><a href="#二、px转vw" class="headerlink" title="二、px转vw"></a>二、px转vw</h3><h4 id="安装需要的插件"><a href="#安装需要的插件" class="headerlink" title="安装需要的插件"></a>安装需要的插件</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -D postcss-<span class="keyword">import</span> postcss-url cssnano-preset-advanced </span><br><span class="line">npm install -S postcss-aspect-ratio-mini postcss-px-to-viewport postcss-write-svg postcss-cssnext cssnano postcss-viewport-units</span><br></pre></td></tr></table></figure><h4 id="index-html修改禁止缩放"><a href="#index-html修改禁止缩放" class="headerlink" title="index.html修改禁止缩放"></a>index.html修改禁止缩放</h4><p><code>&lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=1, maximum-scale=1, user-scalable=no,width=device-width&quot;&gt;</code></p><h4 id="新建配置文件-postcssrc-js-并配置"><a href="#新建配置文件-postcssrc-js-并配置" class="headerlink" title="新建配置文件 .postcssrc.js 并配置"></a>新建配置文件 .postcssrc.js 并配置</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="string">"plugins"</span>: &#123;</span><br><span class="line">    <span class="string">"postcss-import"</span>: &#123;&#125;,</span><br><span class="line">    <span class="string">"postcss-url"</span>: &#123;&#125;,</span><br><span class="line">    <span class="string">"postcss-aspect-ratio-mini"</span>: &#123;&#125;,</span><br><span class="line">    <span class="string">"postcss-write-svg"</span>: &#123;</span><br><span class="line">      utf8: <span class="literal">false</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"postcss-cssnext"</span>: &#123;&#125;,</span><br><span class="line">    <span class="string">"postcss-px-to-viewport"</span>: &#123;</span><br><span class="line">      viewportWidth: <span class="number">750</span>,</span><br><span class="line">      viewportHeight: <span class="number">1334</span>, <span class="comment">// (Number) The height of the viewport. </span></span><br><span class="line">      unitPrecision: <span class="number">3</span>, <span class="comment">// (Number) The decimal numbers to allow the REM units to grow to. </span></span><br><span class="line">      viewportUnit: <span class="string">'vw'</span>, <span class="comment">// (String) Expected units. </span></span><br><span class="line">      selectorBlackList: [<span class="string">'.ignore'</span>, <span class="string">'.hairlines'</span>], <span class="comment">// (Array) The selectors to ignore and leave as px. </span></span><br><span class="line">      minPixelValue: <span class="number">1</span>, <span class="comment">// (Number) Set the minimum pixel value to replace. </span></span><br><span class="line">      mediaQuery: <span class="literal">false</span> <span class="comment">// (Boolean) Allow px to be converted in media queries.</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"postcss-viewport-units"</span>: &#123;&#125;,</span><br><span class="line">    <span class="string">"cssnano"</span>: &#123;</span><br><span class="line">      preset: <span class="string">"advanced"</span>,</span><br><span class="line">      autoprefixer: <span class="literal">false</span>,</span><br><span class="line">      <span class="string">"postcss-zindex"</span>: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="vw的兼容处理（有些手机不支持vw单位）"><a href="#vw的兼容处理（有些手机不支持vw单位）" class="headerlink" title="vw的兼容处理（有些手机不支持vw单位）"></a>vw的兼容处理（有些手机不支持vw单位）</h4><p><code>npm install viewport-units-buggyfill --save</code></p><p>在项目入口处（如main.js）引入<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> hacks = <span class="built_in">require</span>(<span class="string">'viewport-units-buggyfill.hacks'</span>);</span><br><span class="line"><span class="built_in">require</span>(‘viewport-units-buggyfill‘).init(&#123;</span><br><span class="line">    hacks: hacks</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>或者在index.html中引入并初始化<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"//g.alicdn.com/fdilab/lib3rd/viewport-units-buggyfill/0.6.2/??viewport-units-buggyfill.hacks.min.js,viewport-units-buggyfill.min.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">window</span>.viewportUnitsBuggyfill.init(&#123;</span><br><span class="line">        hacks: <span class="built_in">window</span>.viewportUnitsBuggyfillHacks</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure></p><h4 id="在webpack-config-js中引入并在-postcss-loader-中使用插件"><a href="#在webpack-config-js中引入并在-postcss-loader-中使用插件" class="headerlink" title="在webpack.config.js中引入并在 postcss-loader 中使用插件"></a>在webpack.config.js中引入并在 postcss-loader 中使用插件</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> postcssAspectRatioMini = <span class="built_in">require</span>(<span class="string">'postcss-aspect-ratio-mini'</span>)</span><br><span class="line"><span class="keyword">const</span> postcssPxToViewport = <span class="built_in">require</span>(<span class="string">'postcss-px-to-viewport'</span>)</span><br><span class="line"><span class="keyword">const</span> postcssWriteSvg = <span class="built_in">require</span>(<span class="string">'postcss-write-svg'</span>)</span><br><span class="line"><span class="keyword">const</span> postcssCssnext = <span class="built_in">require</span>(<span class="string">'postcss-cssnext'</span>)</span><br><span class="line"><span class="keyword">const</span> postcssViewportUnits = <span class="built_in">require</span>(<span class="string">'postcss-viewport-units'</span>)</span><br><span class="line"><span class="keyword">const</span> cssnano = <span class="built_in">require</span>(<span class="string">'cssnano'</span>)</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    loader: <span class="built_in">require</span>.resolve(<span class="string">'postcss-loader'</span>),</span><br><span class="line">    options: &#123;</span><br><span class="line">      <span class="comment">// Necessary for external CSS imports to work</span></span><br><span class="line">      <span class="comment">// https://github.com/facebookincubator/create-react-app/issues/2677</span></span><br><span class="line">      ident: <span class="string">'postcss'</span>,</span><br><span class="line">      plugins: <span class="function"><span class="params">()</span> =&gt;</span> [</span><br><span class="line">        <span class="built_in">require</span>(<span class="string">'postcss-flexbugs-fixes'</span>),</span><br><span class="line">        autoprefixer(&#123;</span><br><span class="line">          browsers: [</span><br><span class="line">            <span class="string">'&gt;1%'</span>,</span><br><span class="line">            <span class="string">'last 4 versions'</span>,</span><br><span class="line">            <span class="string">'Firefox ESR'</span>,</span><br><span class="line">            <span class="string">'not ie &lt; 9'</span> <span class="comment">// React doesn't support IE8 anyway</span></span><br><span class="line">          ],</span><br><span class="line">          flexbox: <span class="string">'no-2009'</span></span><br><span class="line">        &#125;),</span><br><span class="line">        postcssAspectRatioMini(&#123;&#125;),</span><br><span class="line">        postcssPxToViewport(&#123;</span><br><span class="line">          viewportWidth: <span class="number">750</span>, <span class="comment">// (Number) The width of the viewport.</span></span><br><span class="line">          viewportHeight: <span class="number">1334</span>, <span class="comment">// (Number) The height of the viewport.</span></span><br><span class="line">          unitPrecision: <span class="number">3</span>, <span class="comment">// (Number) The decimal numbers to allow the REM units to grow to.</span></span><br><span class="line">          viewportUnit: <span class="string">'vw'</span>, <span class="comment">// (String) Expected units.</span></span><br><span class="line">          selectorBlackList: [<span class="string">'.ignore'</span>, <span class="string">'.hairlines'</span>], <span class="comment">// (Array) The selectors to ignore and leave as px.</span></span><br><span class="line">          minPixelValue: <span class="number">1</span>, <span class="comment">// (Number) Set the minimum pixel value to replace.</span></span><br><span class="line">          mediaQuery: <span class="literal">false</span> <span class="comment">// (Boolean) Allow px to be converted in media queries.</span></span><br><span class="line">        &#125;),</span><br><span class="line">        postcssWriteSvg(&#123;</span><br><span class="line">          utf8: <span class="literal">false</span></span><br><span class="line">        &#125;),</span><br><span class="line">        postcssCssnext(&#123;&#125;),</span><br><span class="line">        postcssViewportUnits(&#123;&#125;),</span><br><span class="line">        cssnano(&#123;</span><br><span class="line">          preset: <span class="string">'advanced'</span>,</span><br><span class="line">          autoprefixer: <span class="literal">false</span>,</span><br><span class="line">          <span class="string">'postcss-zindex'</span>: <span class="literal">false</span></span><br><span class="line">        &#125;)</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="重启后生效"><a href="#重启后生效" class="headerlink" title="重启后生效"></a>重启后生效</h4><p><code>npm start</code></p><hr>]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- 已经写好的文章在对应的md文件头部添加top：{number}即可 数值越大优先级越高 --&gt;
&lt;h3 id=&quot;一、px转rem&quot;&gt;&lt;a href=&quot;#一、px转rem&quot; class=&quot;headerlink&quot; title=&quot;一、px转rem&quot;&gt;&lt;/a&gt;一、px转rem&lt;
      
    
    </summary>
    
      <category term="React" scheme="wanderfully.club/categories/React/"/>
    
    
      <category term="react" scheme="wanderfully.club/tags/react/"/>
    
      <category term="webpack" scheme="wanderfully.club/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title>微信小程序路由跳转</title>
    <link href="wanderfully.club/2019/05/20/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%B0%8F%E5%9D%91/"/>
    <id>wanderfully.club/2019/05/20/微信小程序小坑/</id>
    <published>2019-05-20T09:54:52.000Z</published>
    <updated>2019-05-22T07:37:45.189Z</updated>
    
    <content type="html"><![CDATA[<!-- 已经写好的文章在对应的md文件头部添加top：{number}即可 数值越大优先级越高 --><h3 id="一、navigateTo和redirectTo"><a href="#一、navigateTo和redirectTo" class="headerlink" title="一、navigateTo和redirectTo"></a>一、navigateTo和redirectTo</h3><p>&emsp;当使用 <strong>wx.navigateTo</strong>（打开新页面） 和 <strong>wx.redirectTo</strong>（页面重定向）的时候只能打开非tabBar的页面，所以路由tabBar的页面是打不开的。</p><h3 id="二、switchTab"><a href="#二、switchTab" class="headerlink" title="二、switchTab"></a>二、switchTab</h3><p>&emsp;使用<strong>wx.switchTab</strong>只能打开tabBar的页面。</p><h3 id="三、relunach"><a href="#三、relunach" class="headerlink" title="三、relunach"></a>三、relunach</h3><p>&emsp;使用<strong>relunach</strong>可以打开任何页面。</p><h3 id="四、tabBar"><a href="#四、tabBar" class="headerlink" title="四、tabBar"></a>四、tabBar</h3><p>&emsp;页面底部的 tabBar 由页面决定，即只要是定义为 tabBar 的页面，底部都有 tabBar。</p><h3 id="五、路由带的参数"><a href="#五、路由带的参数" class="headerlink" title="五、路由带的参数"></a>五、路由带的参数</h3><p>&emsp;调用页面路由带的参数可以在目标页面的onLoad中获取。</p><hr>]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- 已经写好的文章在对应的md文件头部添加top：{number}即可 数值越大优先级越高 --&gt;
&lt;h3 id=&quot;一、navigateTo和redirectTo&quot;&gt;&lt;a href=&quot;#一、navigateTo和redirectTo&quot; class=&quot;headerlink&quot; 
      
    
    </summary>
    
      <category term="微信小程序" scheme="wanderfully.club/categories/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    
      <category term="路由" scheme="wanderfully.club/tags/%E8%B7%AF%E7%94%B1/"/>
    
  </entry>
  
</feed>
